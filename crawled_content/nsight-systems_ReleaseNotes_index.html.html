<html><head><title>Release Notes — nsight-systems 2024.4 documentation</title></head><body><body class="wy-body-for-nav">
 <a href="https://docs.nvidia.com/nsight-systems/index.html">
 </a>
 <ul class="current">
  <li class="toctree-l1 current">
   <a class="current reference internal" href="https://docs.nvidia.com/nsight-systems/ReleaseNotes/index.html">
    Release Notes
   </a>
   <ul>
    <li class="toctree-l2">
     <a class="reference internal" href="https://docs.nvidia.com/nsight-systems/ReleaseNotes/index.html#what-s-new">
      Whatâs New
     </a>
    </li>
    <li class="toctree-l2">
     <a class="reference internal" href="https://docs.nvidia.com/nsight-systems/ReleaseNotes/index.html#known-issues">
      Known Issues
     </a>
     <ul>
      <li class="toctree-l3">
       <a class="reference internal" href="https://docs.nvidia.com/nsight-systems/ReleaseNotes/index.html#general-issues">
        General Issues
       </a>
      </li>
      <li class="toctree-l3">
       <a class="reference internal" href="https://docs.nvidia.com/nsight-systems/ReleaseNotes/index.html#vgpu-issues">
        vGPU Issues
       </a>
      </li>
      <li class="toctree-l3">
       <a class="reference internal" href="https://docs.nvidia.com/nsight-systems/ReleaseNotes/index.html#docker-issues">
        Docker Issues
       </a>
      </li>
      <li class="toctree-l3">
       <a class="reference internal" href="https://docs.nvidia.com/nsight-systems/ReleaseNotes/index.html#cuda-trace-issues">
        CUDA Trace Issues
       </a>
      </li>
      <li class="toctree-l3">
       <a class="reference internal" href="https://docs.nvidia.com/nsight-systems/ReleaseNotes/index.html#multi-report-analysis-issues">
        Multi Report Analysis Issues
       </a>
      </li>
     </ul>
    </li>
   </ul>
  </li>
  <li class="toctree-l1">
   <a class="reference internal" href="https://docs.nvidia.com/nsight-systems/InstallationGuide/index.html">
    Installation Guide
   </a>
  </li>
  <li class="toctree-l1">
   <a class="reference internal" href="https://docs.nvidia.com/nsight-systems/UserGuide/index.html">
    User Guide
   </a>
  </li>
  <li class="toctree-l1">
   <a class="reference internal" href="https://docs.nvidia.com/nsight-systems/CopyrightAndLicenses/index.html">
    Copyright and Licenses
   </a>
  </li>
 </ul>
 <p class="caption" role="heading">
  <span class="caption-text">
   Archives
  </span>
 </p>
 <ul>
  <li class="toctree-l1">
   <a class="reference internal" href="https://docs.nvidia.com/nsight-systems/Archives/index.html">
    Archives
   </a>
  </li>
 </ul>
 <a href="https://docs.nvidia.com/nsight-systems/index.html">
  nsight-systems
 </a>
 <ul class="wy-breadcrumbs">
  <li>
   <a class="icon icon-home" href="https://docs.nvidia.com/nsight-systems/index.html">
   </a>
   »
  </li>
  <li>
   Release Notes
  </li>
  <li class="wy-breadcrumbs-aside">
   <span>
    v2024.4 |
   </span>
   <a class="reference external" href="https://docs.nvidia.com/nsight-systems/Archives/index.html">
    Archive
   </a>
  </li>
 </ul>
 <h1>
  Release Notes
  <a class="headerlink" href="https://docs.nvidia.com/nsight-systems/ReleaseNotes/index.html#release-notes" title="Permalink to this headline">
   ï
  </a>
 </h1>
 <p>
  Release notes and known issues.
 </p>
 <h2>
  Whatâs New
  <a class="headerlink" href="https://docs.nvidia.com/nsight-systems/ReleaseNotes/index.html#what-s-new" title="Permalink to this headline">
   ï
  </a>
 </h2>
 <p>
  New Features Summary
 </p>
 <ul class="simple">
  <li>
   <p>
    Correlate NVENC and NVDEC workloads to NVIDIA Video Codec SDK APIs
   </p>
  </li>
  <li>
   <p>
    H100 initialization timing improvements
   </p>
  </li>
  <li>
   <p>
    nvtx_gpu_proj_trace recipe now has support for CUDA graphs
   </p>
  </li>
  <li>
   <p>
    NVTX Payloads Extension API support (preview)
   </p>
  </li>
  <li>
   <p>
    Timeline contrast improvements
   </p>
  </li>
  <li>
   <p>
    CUDA kernel name demangler improvements
   </p>
  </li>
 </ul>
 <h2>
  Known Issues
  <a class="headerlink" href="https://docs.nvidia.com/nsight-systems/ReleaseNotes/index.html#known-issues" title="Permalink to this headline">
   ï
  </a>
 </h2>
 <h3>
  General Issues
  <a class="headerlink" href="https://docs.nvidia.com/nsight-systems/ReleaseNotes/index.html#general-issues" title="Permalink to this headline">
   ï
  </a>
 </h3>
 <ul>
  <li>
   <p>
    Nsight Systems versions, starting with 2024.2 do not provide support for Power
PC, we recommend you use an older version, downloadable from
    <a class="reference external" href="https://developer.nvidia.com/gameworksdownload">
     https://developer.nvidia.com/gameworksdownload
    </a>
    .
   </p>
  </li>
  <li>
   <p>
    Nsight Systems versions, starting with 2024.4 do not provide support for
cuBLAS versions prior to 11.4. If you cannot update your cuBLAS, we recommend
you use an older version, downloadable from
    <a class="reference external" href="https://developer.nvidia.com/gameworksdownload">
     https://developer.nvidia.com/gameworksdownload
    </a>
    .
   </p>
  </li>
  <li>
   <p>
    The current release of Nsight Systems CLI doesnât support naming a session
with a name longer than 127 characters. Profiling an executable with a name
exceeding 111 characters is also unsupported by the
    <span class="pre">
     nsys
    </span>
    <span class="pre">
     profile
    </span>
    command.
Those limitations will be removed in a future version of the CLI.
   </p>
  </li>
  <li>
   <p>
    Nsight Systems 2020.4 introduces collection of thread scheduling information
without full sampling. While this allows system information at a lower cost,
it does add overhead. To turn off thread schedule information collection, add
    <span class="pre">
     --cpuctxsw=none
    </span>
    to your command line or turn off in the GUI.
   </p>
  </li>
  <li>
   <p>
    Profiling greater than 5 minutes is not officially supported at this time.
Profiling high activity applications, on high performance machines, over a
long analysis time can create large result files that may take a very long
time to load, run out of memory, or lock up the system. If you have a complex
application, we recommend starting with a short profiling session duration of
no more than 5 minutes for your initial profile. If your application has a
natural repeating pattern, often referred to as a frame or an iteration, you
will typically only need a few of these. This suggested limit will increase
in future releases.
   </p>
  </li>
  <li>
   <p>
    Attaching or re-attaching to a process from the GUI is not supported with the
x86_64 Linux target. Equivalent results can be obtained by using
the interactive CLI to launch the process and then starting and stopping
analysis at multiple points.
   </p>
  </li>
  <li>
   <p>
    To reduce overhead, Nsight Systems traces a subset of API calls likely to
impact performance when tracing APIs rather than all possible calls. There
is currently no way to change the subset being traced when using the CLI.
See respective library portion of this documentation for a list of calls
traced by default. The CLI limitation will be removed in a future version of
the product.
   </p>
  </li>
  <li>
   <p>
    There is an upper bound on the default size used by the tool to record trace
events during the collection. If you see the following diagnostic error, then
Nsight Systems hit the upper limit.
   </p>
   <pre><span class="n">Reached</span><span class="n">the</span><span class="n">size</span><span class="n">limit</span><span class="n">on</span><span class="n">recording</span><span class="n">trace</span><span class="n">events</span><span class="k">for</span><span class="k">this</span><span class="n">process</span><span class="p">.</span>
<span class="n">Try</span><span class="n">reducing</span><span class="n">the</span><span class="n">profiling</span><span class="n">duration</span><span class="n">or</span><span class="n">reduce</span><span class="n">the</span><span class="n">number</span><span class="n">of</span><span class="n">features</span>
<span class="n">traced</span><span class="p">.</span>
</pre>
  </li>
  <li>
   <p>
    When profiling a framework or application that uses CUPTI, like some versions
of TensorFlow(tm), Nsight Systems will not be able to trace CUDA usage due to
limitations in CUPTI. These limitations will be corrected in a future version
of CUPTI. Consider turning off the applicationâs use of CUPTI if CUDA tracing
is required.
   </p>
  </li>
  <li>
   <p>
    Tracing an application that uses a memory allocator that is not thread-safe
is not supported.
   </p>
  </li>
  <li>
   <p>
    Tracing OS Runtime libraries in an application that preloads glibc symbols is
unsupported and can lead to undefined behavior.
   </p>
  </li>
  <li>
   <p>
    Nsight Systems cannot profile applications launched through a virtual window
manager like GNU Screen.
   </p>
  </li>
  <li>
   <p>
    Using Nsight Systems MPI trace functionality with the Darshan runtime module
can lead to segfaults. To resolve the issue, unload the module.
   </p>
  </li>
 </ul>
 <pre><span class="k">module</span><span class="n">unload</span><span class="n">darshan</span><span class="o">-</span><span class="n">runtime</span>
</pre>
 <ul class="simple">
  <li>
   <p>
    Profiling MPI Fortran APIs with MPI_Status as an argument, e.g. MPI_Recv,
MPI_Test[all], MPI_Wait[all], can potentially cause memory corruption for
MPICH versions 3.0.x. The reason is that the MPI_Status structure in MPICH
3.0.x has a different memory layout than in other MPICH versions
(2.1.x and &gt;=3.1.x have been tested) and the version (3.3.2) we used to
compile the Nsight Systems MPI interception library.
   </p>
  </li>
  <li>
   <p>
    Using
    <span class="pre">
     nsys
    </span>
    <span class="pre">
     export
    </span>
    to export to an SQLite database will fail if the
destination filesystem doesnât support file locking. The error message will
mention:
   </p>
  </li>
 </ul>
 <pre><span class="n">std</span><span class="o">::</span><span class="n">exception</span><span class="o">::</span><span class="n">what</span><span class="o">:</span><span class="n">database</span><span class="n">is</span><span class="n">locked</span>
</pre>
 <ul>
  <li>
   <p>
    On some Linux systems when VNC is used, some widgets can be rendered
incorrectly, or Nsight Systems can crash when opening Analysis Summary or
Diagnostics Summary pages. In this case, try forcing a specific software
renderer:
    <span class="pre">
     GALLIUM_DRIVER=llvmpipe
    </span>
    <span class="pre">
     nsys-ui
    </span>
   </p>
  </li>
  <li>
   <p>
    Due to
    <a class="reference external" href="https://github.com/open-mpi/ompi/issues/6648">
     a known bug in Open MPI 4.0.1
    </a>
    , target application may
crash at the end of execution when being profiled by Nsight Systems. To avoid
the issue, use a different Open MPI version, or add
    <span class="pre">
     --mca
    </span>
    <span class="pre">
     btl
    </span>
    <span class="pre">
     ^vader
    </span>
    option to
    <span class="pre">
     mpirun
    </span>
    command line.
   </p>
  </li>
  <li>
   <p>
    The multiprocessing module in Python is commonly used by customers to create
new processes. On Linux, the module defaults to using the âforkâ mode where
it forks new processes, but does not call exec. According to the POSIX
standard, fork without exec leads to undefined behavior and tools like
Nsight Systems that rely on injection are only allowed to make
async-signal-safe calls in such a process. This makes it very hard for tools
like Nsight Systems to collect profiling information. See
    <a class="reference external" href="https://docs.python.org/3/library/multiprocessing.html#contexts-and-start-methods">
     https://docs.python.org/3/library/multiprocessing.html#contexts-and-start-methods
    </a>
   </p>
   <p>
    Use the set_start_method in the multiprocessing module to change the start
method to âspawnâ which is much safer and allows tools like Nsight Systems to
collect data. See the code example given in the link above.
   </p>
   <p>
    The user needs to ensure that processes exit gracefully (by using close and
join methods, for example, in the multiprocessing moduleâs objects).
Otherwise, Nsight Systems cannot flush buffers properly and you might end up
with missing traces.
   </p>
  </li>
  <li>
   <p>
    When the CLI sequence launch, start, stop is used to profile a process-tree,
LinuxPerf does a depth first search (DFS) to find all of the threads launched
by the process-tree before programming the OS to collect the data. If, during
the DFS, one or more threads are created by the process tree, it is possible
those threads wonât be found and LinuxPerf would not collect data for them.
   </p>
   <p>
    Note that once a thread is programmed via perf_event_open, any subsequent
children processes or threads generated by that thread will be tracked since
the perf_event_open inherit bit is set.
   </p>
   <p>
    No other CLI command sequence suffers from this possible issue. Also, if a
systemwide mode is used, the issue does not exist.
   </p>
  </li>
 </ul>
 <h3>
  vGPU Issues
  <a class="headerlink" href="https://docs.nvidia.com/nsight-systems/ReleaseNotes/index.html#vgpu-issues" title="Permalink to this headline">
   ï
  </a>
 </h3>
 <ul class="simple">
  <li>
   <p>
    When running Nsight Systems on vGPU you should always use the profiler grant. See
    <a class="reference external" href="https://docs.nvidia.com/grid/latest/grid-vgpu-user-guide/index.html#enabling-cuda-toolkit-profilers-vgpu">
     Virtual GPU Software Documentation
    </a>
    for details on enabling NVIDIA CUDA Toolkit profilers for NVIDIA vGPUs. Without the grant, unexpected migrations may crash a running session, report an error and abort. It may also silently produce a corrupted report which may be unloadable or show inaccurate data with no warning.
   </p>
  </li>
  <li>
   <p>
    Starting with vGPU 13.0, device level metrics collection is exposed to end users even on vGPU. Device level metrics will give info about all the work being executed on the GPU. The work might be in the same VM or some other VM running on the same physical GPU.
   </p>
  </li>
  <li>
   <p>
    As of CUDA 11.4 and R470 TRD1 driver release, Nsight Systems is supported in a vGPU environment which requires a vGPU license. If the license is not obtained after 20 minutes, the tool will still work but the reported GPU performance metrics data will be inaccurate. This is because of a feature in vGPU environment which reduces performance but retains functionality as specified in
    <a class="reference external" href="https://docs.nvidia.com/grid/latest/grid-licensing-user-guide/index.html#software-enforcement-grid-licensing">
     Grid Licensing User Guide
    </a>
    .
   </p>
  </li>
 </ul>
 <h3>
  Docker Issues
  <a class="headerlink" href="https://docs.nvidia.com/nsight-systems/ReleaseNotes/index.html#docker-issues" title="Permalink to this headline">
   ï
  </a>
 </h3>
 <ul class="simple">
  <li>
   <p>
    In a Docker, when a systemâs host utilizes a kernel older than v4.3, it is not possible for Nsight Systems to collect sampling data unless both the host and Docker are running a RHEL or CentOS operating system utilizing kernel version 3.10.1-693 or newer. A user override for this will be made available in a future version.
   </p>
  </li>
  <li>
   <p>
    When
    <span class="pre">
     docker
    </span>
    <span class="pre">
     exec
    </span>
    is called on a running container and stdout is kept open from a command invoked inside that shell, the exec shell hangs until the command exits. You can avoid this issue by running with
    <span class="pre">
     docker
    </span>
    <span class="pre">
     exec
    </span>
    <span class="pre">
     --tty
    </span>
    . See the bug reports at:
   </p>
  </li>
  <li>
   <p>
    <a class="reference external" href="https://github.com/moby/moby/issues/33039">
     https://github.com/moby/moby/issues/33039
    </a>
   </p>
  </li>
  <li>
   <p>
    <a class="reference external" href="https://github.com/drud/ddev/issues/732">
     https://github.com/drud/ddev/issues/732
    </a>
   </p>
  </li>
 </ul>
 <h3>
  CUDA Trace Issues
  <a class="headerlink" href="https://docs.nvidia.com/nsight-systems/ReleaseNotes/index.html#cuda-trace-issues" title="Permalink to this headline">
   ï
  </a>
 </h3>
 <ul>
  <li>
   <p>
    When using CUDA Toolkit 10.X, tracing of DtoD memory copy operations may result in a crash. To avoid this issue, update CUDA Toolkit to 11.X or the latest version.
   </p>
  </li>
  <li>
   <p>
    Nsight Systems will not trace kernels when a CDP (CUDA Dynamic Parallelism) kernel is found in a target application on Volta devices or later.
   </p>
  </li>
  <li>
   <p>
    On Tegra platforms, CUDA trace requires root privileges. Use the
    Launch as root
    checkbox in project settings to make the profiled application run as root.
   </p>
  </li>
  <li>
   <p>
    If the target application uses multiple streams from multiple threads, CUDA event buffers may not be released properly. In this case, you will see the following diagnostic error:
   </p>
   <pre>Couldn't allocate CUPTI bufer x times. Some CUPTI events may
       be missing.
</pre>
   <p>
    Please contact the Nsight Systems team.
   </p>
  </li>
  <li>
   <p>
    In this version of Nsight Systems, if you are starting and stopping profiling inside your application using the interactive CLI, the CUDA memory allocation graph generation is only guaranteed to be correct in the first profiling range. This limitation will be removed in a future version of the product.
   </p>
  </li>
  <li>
   <p>
    CUDA GPU trace collection requires a fraction of GPU memory. If your application utilizes all available GPU memory, CUDA trace might not work or can break your application. As an example cuDNN application can crash with
    <span class="pre">
     CUDNN_STATUS_INTERNAL_ERROR
    </span>
    error if GPU memory allocation fails.
   </p>
  </li>
  <li>
   <p>
    For older Linux kernels, prior to 4.4, when profiling very short-lived applications (~1 second) that exit in the middle of the profiling session, it is possible that Nsight Systems will not show the CUDA events on the timeline.
   </p>
  </li>
  <li>
   <p>
    When more than 64k serialized CUDA kernels and memory copies are executed in the application, you may encounter the following exception during profiling:
   </p>
   <pre><span class="nl">InvalidArgumentException</span><span class="p">:</span><span class="s">"Wrong event order detected"</span>
</pre>
   <p>
    Please upgrade to the CUDA 9.2 driver at minimum to avoid this problem. If you cannot upgrade, you can get a partial analysis, missing potentially a large fraction of CUDA events, by using the CLI.
   </p>
  </li>
  <li>
   <p>
    On Vibrante, when running a profiling session with multiple targets that are guest VMs in a CCC configuration behind a NAT, you may encounter an error with the following text during profiling:
   </p>
   <pre><span class="n">Failed</span><span class="n">to</span><span class="n">sync</span><span class="n">time</span><span class="n">on</span><span class="n">device</span><span class="p">.</span>
</pre>
   <p>
    Please edit the group connection settings, select
    Targets on the same SoC
    checkbox there and try again.
   </p>
  </li>
  <li>
   <p>
    When using the 455 driver, as shipped with CUDA Tool Kit 11.1, and tracing CUDA with Nsight Systems you many encounter a crash when the application exits. To avoid this issue, end your profiling session before the application exits or update your driver.
   </p>
  </li>
 </ul>
 <h3>
  Multi Report Analysis Issues
  <a class="headerlink" href="https://docs.nvidia.com/nsight-systems/ReleaseNotes/index.html#multi-report-analysis-issues" title="Permalink to this headline">
   ï
  </a>
 </h3>
 <ul class="simple">
  <li>
   <p>
    Be aware that setting up Dask analysis on your workstation requires some additional work on the system. For small data inputs, running the recipes without Dask may be faster.
   </p>
  </li>
 </ul>
 <p>
  © Copyright 2018-2024, NVIDIA Corporation &amp; Affiliates. All rights reserved.
  <span class="lastupdated">
   Last updated on May 21, 2024.
  </span>
 </p>
</body>
</body></html>